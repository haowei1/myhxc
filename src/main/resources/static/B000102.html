<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no">
    <title>管理年度养护计划</title>
    <link rel="stylesheet" type="text/css" href="public/layui/css/layui.css">
    <link rel="stylesheet" type="text/css" href="https://www.layui.com/admin/std/dist/layuiadmin/style/admin.css">
    <link href="public/css/common.css" type="text/css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="public/css/iconfont.css">
    <script src="public/js/jquery-3.2.1.min.js"></script>
    <script src="public/layui/layui.js"></script>
    <script src="public/js/alert.js"></script>
    <script src="public/js/echarts.min.js"></script>
    <script src="public/js/yhxc.js"></script>
    <style>
        .layui-form-item .layui-input-inline{width:120px}
        .layui-form-item .layui-input-inline .layui-form-select{width:430px}
    </style>
</head>
<body>
<form class="layui-form p20" action="" lay-filter="editForm">
    <input type="hidden" name="uuid" id="uuid">
    <div class="layui-form-item">
        <label class="layui-form-label">计划年份</label>
        <div class="layui-input-block">
            <input type="text" name="planYear" id="planYear" lay-verify="required" autocomplete="off" class="layui-input">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">路线ID</label>
        <div class="layui-input-block">
            <input type="text" name="roadId" autocomplete="off" class="layui-input">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">路线名称</label>
        <div class="layui-input-block">
            <input type="text" name="roadName" autocomplete="off" class="layui-input">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">桩号区间</label>
        <div class="layui-input-block">
            <input type="text" name="mileageRangeId" autocomplete="off" class="layui-input">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">公路设施面积</label>
        <div class="layui-input-block">
            <input type="text" name="facilityArea" autocomplete="off" class="layui-input">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">计划维修面积</label>
        <div class="layui-input-block">
            <input type="text" name="planmtcarea" autocomplete="off" class="layui-input">
        </div>
    </div>
    <div class="layui-form-item">
        <div class="layui-input-block">
            <button class="layui-btn" lay-submit lay-filter="dataEdit">立即提交</button>
            <button type="reset" class="layui-btn layui-btn-primary">重置</button>
        </div>
    </div>
</form>
<script>
    layui.use(['form','laydate'],function () {
        var form = layui.form,
            laydate=layui.laydate,
            $=layui.$;
        laydate.render({
            elem: '#planYear'
            ,type: 'year'
        })
        $('#uuid').val('');
        if (getUrlParam("uuid")){
            $.ajax({
                type: 'get',
                url: '/b0001/getAData/'+getUrlParam('uuid')+'?random='+Math.random(),
                success: function (res) {
                    form.val('editForm',{
                        "planYear": res.data.planYear,
                        "roadId": res.data.roadId,
                        "roadName":res.data.roadName,
                        "mileageRangeId":res.data.mileageRangeId,
                        "facilityArea": res.data.facilityArea,
                        "planmtcarea":res.data.planmtcarea
                    })
                    form.render();
                }
            })
        }

        form.on('submit(dataEdit)',function (datas) {
            $.ajax({
                type: 'post',
                url: '/b0001/addAData',
                data: datas.field,
                success: function (res) {
                    if (res.code!=0){
                        layer.alert(res.msg);
                    } else {
                        top.window.location.href='./B000101.html';
                    }
                }
            })
            return false;
        })

    })
</script>
</body>
</html>