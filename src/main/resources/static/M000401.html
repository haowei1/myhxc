<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no">
    <title>桥梁信息</title>
    <link rel="stylesheet" type="text/css" href="public/layui/css/layui.css">
    <link rel="stylesheet" type="text/css" href="https://www.layui.com/admin/std/dist/layuiadmin/style/admin.css">
    <link href="public/css/common.css" type="text/css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="public/css/nav.css">
    <link rel="stylesheet" type="text/css" href="public/css/iconfont.css">
    <script src="public/js/jquery-3.2.1.min.js"></script>
    <script src="public/layui/layui.js"></script>
    <script src="public/js/common.js"></script>
    <script src="public/js/yhxc.js"></script>
    <script src="http://webapi.amap.com/maps?v=1.4.9&key=adc69981b70fa8bf12bbd719fbf5d03b&plugin=AMap.Autocomplete,AMap.PlaceSearch,AMap.MouseTool,AMap.CitySearch"></script>
    <script type="text/javascript" src="https://cache.amap.com/lbs/static/addToolbar.js"></script>
    <style>
        .main-container{width:680px; height:580px; position: absolute; top:0; left: 0; background: #fff; display: none;}
    </style>
</head>
<body>

<!--主内容框架-->
<div class="main_height main_index lt" style="background: #f2f4f8;">
    <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
        <legend>桥梁信息</legend>
    </fieldset>
    <div class="layui-form layui-card-header layuiadmin-card-header-auto p20">
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label" style="width: auto;">路线名称</label>
                <div class="layui-input-block" style="margin-left:100px">
                    <input type="text" id="searchKey" name="searchKey" placeholder="请输入" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <button class="layui-btn" data-type="reload"><i class="layui-icon layui-icon-search layuiadmin-button-btn"></i>搜索</button>
                </button>
            </div>
        </div>
    </div>
    <div class="layui-row layui-col-space10" style="padding: 10px; background: #fff;">
        <div class="layui-btn-group demoTable">
            <button class="layui-btn" data-type="addData"><i class="layui-icon">&#xe608;</i>添加桥梁信息</button>
        </div>
        <div class="layui-btn-group demoTable m0">
            <button class="layui-btn layui-btn-danger" data-type="delData"><i class="layui-icon">&#xe640;</i>批量删除</button>
        </div>
        <table class="layui-hide" id="dataTable" lay-filter="tableFilter"></table>

        <script type="text/html" id="toolBar">
            <a class="layui-btn layui-btn-normal layui-btn-xs" lay-event="edit">修改</a>
            <a class="layui-btn layui-btn-danger layui-btn-xs ml5" lay-event="del">删除</a>
            <a class="layui-btn layui-btn-xs btnEdit" lay-event="setUser">设置维护人员</a>
        </script>
        <script type="text/html" id="areaAddress">
            <a class="layui-btn layui-btn-xs btnEdit" lay-event="area">查看空间位置</a>
        </script>
    </div>
</div>
<script>
    xsui.setLeftMenu();
    xsui.setHeader();
</script>
<script type="text/javascript" src="public/js/nav.js"></script>
<script>
    var map=new AMap.Map("container",{
        resizeEnable: true
    });
    layui.use(['table'],function () {
        var table=layui.table,
            $=layui.$;
        //执行一个 table 实例
        var active={
            addData: function () {
                
            },
            delData: function () {
                
            },
            reload: function () {
                table.reload('dataTable',{
                    where: {
                        form: {
                            roadName: $('#searchKey').val()
                        }
                    },
                    page: {
                        curr:1
                    }
                })
            }
        }
        table.render({
            elem: '#dataTable'
            ,url: '/m0004/getAll' //数据接口
            ,title: '桥梁信息表'
            ,page: true //开启分页
            ,cols: [[ //表头
                {type: 'checkbox', fixed: 'left'}
                ,{type: 'numbers',title: '序号',fixed: 'left'}
                ,{field: 'roadNumber', title: '路线编号', width:100}
                ,{field: 'roadName', title: '路线名称', width: 100, sort: true, totalRow: true}
                ,{field: 'bridgeNumber', title: '桥梁编号', width:100, sort: true}
                ,{field: 'bridgeName', title: '桥梁名称', width: 100, sort: true, totalRow: true}
                ,{field: 'bridgePile', title: '桥梁桩号', width:100}
                ,{field: 'startPileKm', title: '起点桩号(公里)', width: 100}
                ,{field: 'startPileM', title: '起点桩号(里)', width: 100}
                ,{field: 'endPileKm', title: '终点桩号(公里)', width: 100}
                ,{field: 'endPileM', title: '终点桩号(里)', width: 100}
                ,{title: '空间位置', minwidth: 120,align: 'center',toolbar: '#areaAddress'}
                ,{field: 'areaAddress', title: '财富', width: 100, sort: true, totalRow: true}
                ,{field: 'belongDepnm', title: '财富', width: 100, sort: true, totalRow: true}
                ,{field: 'areaMileage', title: '财富', width: 100, sort: true, totalRow: true}
                ,{field: 'areaArea', title: '财富', width: 100, sort: true, totalRow: true}
                ,{fixed: 'right', width: 165, align:'center', toolbar: '#toolBar'}
            ]]
            ,id:'dataTable'
        });

        $('.layui-btn').on('click', function(){
            var type = $(this).data('type');
            active[type] ? active[type].call(this) : '';
        });
    })
</script>
</body>
</html>